# ุชูุฑูุฑ ุงูุชุญููู ุงูุฏุงุฎูู ููููุงุช ุงููุญุฑุฑ ูุชุทูุฑูุง ุงูููุฏุณู (ุฃูุงู ุชูุชุฑ)

> ุชุงุฑูุฎ ุงูุชูุฑูุฑ ูุงูุชูููู ุงูุฏุงุฎูู: 2026-02-22
> ูุนุชูุฏ ูุฐุง ุงูุชูุฑูุฑ ุนูู ุฌูุน ููุตู ุจูุงูุงุช ุงูุชูุนูู ูุงูุฃุฏูุงุฑ (ุงูุฌุฏุงูู ุงูุดุงููุฉ ูู ุชุฏููู ุงูุฏูุนุฉ ุงูุฃููู ูุงูุซุงููุฉ) ูุน ุฒุงููุฉ ุงูุชุทูุฑ ุงููุนูุงุฑู ุงูุฏุงุฎูู ูููููุงุชุ ูุชุจูุงู ูุณุชููุงุช ุงูุฃููุงุฏ ููุฏูุฏ ูุงุฆุฏุชูุง ูููุดุฑูุน ููุฏุณูุงูุ ูุน ุงูุชุฑููุฒ ุนูู ููุงุฉ ุงูู `src` ููููุงุช ุงูู `types` ู `utils`.

---

## 1. ููุฎุต ุญุงูุฉ ุงูุชูุนูู ุงูุนุงู ุฏุงุฎู ูุฌูุฏุงุช ุงููุงุฌูุฉ

ููุชูู ุญุงููุงู ูุงุฆูุฉ ูุชูุงุณูุฉ ุชูููุงู ูู ุงููููุงุช ุงูุชู ูุจูุบ ุนุฏุฏูุง ุงูุฃุณุงุณู ูู ุงูุชุฏููู 25 ูููุงู (ุจูู ุฃููุงุน ูุฃุฏูุงุช ููุฑุงูุฒ ุฌุฐูุน). ูุชุชููุฒ ูุฐู ุงููุฌููุนุฉ ุจุฃููุง ููุนููุฉ ุนูููุงู ุจุงุณุชุซูุงุกุงุช ุฌููุฑูุฉ ููุฃูุธูุฉ ุงูุชู ุชุญุชุงุฌ ููุชุนุฑูู ุงูุจูุฆู ูุงูุฎูุงุฏู:

| ุงูุชุตููู ุงููุนูุงุฑู    | ุงูุนุฏุฏ | ูุตู ุงููููุงุช                                                                 |
| ------------------- | ----- | --------------------------------------------------------------------------- |
| **ููุนู ุจุงููุงูู**    | 22    | ุงูุบุงูุจูุฉ ุงูุณุงุญูุฉ ูู ุงูุฌุฐูุฑ ูุงูุฃููุงุน ูุงูุฃุฏูุงุช (Core & Utils).                |
| **ููุนู ุดุฑุทูุงู**     | 2     | ุฃูุธูุฉ ุชุชุทูุจ ุจูุฆุฉ ุฎุงุฏู ูููุงุชูุญ `env` ูุซู `backend-extract` ู `agent-review`. |
| **ุบูุฑ ููุนู ุชูุงูุงู** | 1     | ูููุงุช ุฅุฑุซูุฉ ุชุฌุงูุฒูุง ุงูุฒูู ูุซู `toolbar.ts`.                                 |

---

## 2. ุชูููู ุงูุชุทูุฑ ุงูููุฏุณู ูุชููููุงุช ุงููููุงุช (ุงูููุงุฑูุฉ ุงูุฏุงุฎููุฉ)

ูููุณู ุงูููุฏ ุงูุฏุงุฎูู ุฅูู ุฃุฑุจุน ูุฆุงุช ูุนูุงุฑูุฉ ุชุจููู ุญุฌู ุงูุนุจูุฑูุฉ ุงูุจุฑูุฌูุฉ ููุงุจู ุงูุฃุฌุฒุงุก ุบูุฑ ุงูููุชููุฉ ูุงููุชุฑููุฉ:

### ๐ ุฃ. ูููุงุช "ุชุญู ูุนูุงุฑูุฉ ูุชุทูุฑุฉ ุฌุฏุงู" (Highly Engineered / ุฒูููุง ุจุงูุธุจุท ูุจุฌุฏุงุฑุฉ)

ูุฐู ุงููููุงุช ุชุนูุณ ููุฉ ุงูุชูุงูู ุจูู ุงูุจููุฉ ุงููุณุชูุฏูุฉ ูุงูุชูููุฐ ุงูุนุจูุฑู:

- **`document-model.ts` (ูุธุงู ุญูุธ ูุชูููุฏ ุญูููุฉ ุงูุชุดููุฑ):**
  - ูุญูู ูุชู ูุฃุฌุฒุงุก ุงูููุงุทุน ุงูููุชูุจุฉ ููุต ููููู ุญุงุณูุจูุงู ุนุจุฑ ุชูููุฏ ุดูุฑุฉ (Base64) ููุถุน ุนูููุง ุฎุชู ุญูุงูุฉ (FNV1a Checksum). ููุฏุฑุฌ ูุฐุง ุงูููุดูุฑ ูู `[[FILMLANE_PAYLOAD_V1:...]]` ููุญูุงุธ ุนูู ุชุตููู ุงูุณุทูุฑ ุฃุซูุงุก ุชููุจุงุช ุงููุณุฎ.
- **`structure-pipeline.ts` (ุฎูุงุฑุฒููุฉ ุงูุญุงุฑุณ ูุงูููุตูู ุงูุขูู):**
  - ูุญุฑู (State Machine) ูุงุฆู ุงูุฏูุฉ ุจู 11 ุฃููููุฉ. ูููุฑ ุงูููุฒุฉ ุงูุงุณุชุซูุงุฆูุฉ `ProjectionGuardReport` (ุญุงุฑุณ ุงูุฅุณูุงุท) ุงูุฐู ูููุน ุงููุณุชูุฏ ูู ุงูุงููุญุงุก ุงููุงูู ูู ูุงุญุธ ุฃู ุงูุงุณุชูุฑุงุฏ ุณูุชูู ุงููุต.
- **`editor-clipboard.ts` (ุญุงูุธุฉ ุงูุฐุงูุฑุฉ ุงููุนูุงุฑูุฉ):**
  - ููุน ูุจุชูุฑ (MIME - `application/x-filmlane-blocks+json`) ูุฑุจุท ุงูุฐุงูุฑุฉ ุจุชุตููู ุฃุณุทุฑ ุงููููู ููุคูู ุงุณุชุฑุฌุงุน ููุน ุงูููุฑุฉ ุญุชู ุถูู ุงููุณุฎ ุงููุคูุช.
- **`open-pipeline.ts` ู `extract/index.ts` (ููุณูุงุช ุงูุงุณุชูุฑุงุฏ):**
  - ูุธุงู ุงุณุชุฑุงุชูุฌูุงุช ุฐูู ุฌุฏุงู ููุฑูู ุจูู ุงูุฃููุงุน ุงููุนูุฏุฉ ูุงูู PDF ููุญูู ููุจุฏูู ุงูุฃูุณุจ ุจุงููุชุตูุญ ุฃู ุงูุฎุงุฏู ูุถูุงู ุนุฏู ุชูู ุงุณุชูุฑุงุฏ ุงููุณุชุฎุฏู.

### ๐จ ุจ. ูููุงุช "ุณุงุจูุฉ ูุขูุงููุง ููููุฆุฉ ูููุณุชูุจู" (ูุชุทูุฑุฉ ุนููุง ูุชูุชุธุฑ ุงูุชูุนูู)

ุฃุณุงุณุงุช ุจุฑูุฌุช ูุชููู ุนุธููุฉุ ููููุง ูููุฏุฉ ูุนุฏู ุงูุชูุงู ุงูุณูุณูุฉ ุจุงููุงุฌูุฉ (ูุงุฆูุฉ):

- **`types/agent-review.ts` (ุงููุฑุงุฌุน ุงูุฐูู Opus 4.6):**
  - ูุธุงู ููุชูู ุชูุงูุงู ูู ุงููุงุฌูุฉ (ุงูุนููู) ูุงูุฎุงุฏูุ ูุญูู ููุทุฉ ุงูุงุดุชุจุงู ูููุฑุฑ ุงูุฃุณุทุฑ ูู Claude. **ุงูููุต ุงููุญูุฏ:** ุบูุงุจ ุฅุนุฏุงุฏ ุงูุชููุฆุฉ ุงูุจูุฆูุฉ (`ANTHROPIC_API_KEY` + `VITE_AGENT_REVIEW_BACKEND_URL`). ุจุฏูููุง ุชุฑุฌุน ุงููุญุงููุงุช ุตุงูุชุฉ (`skipped` ุฃู `warning`).
- **`backend-extract.ts` (ููุตุฉ ุงูุนูููุงุช ุงูุฎูููุฉ ุงูุถุฎูุฉ):**
  - ุฌุงูุฒ ููุชุนุงูู ูุน Mistral OCR ู ุชุญููู DOC ุนุจุฑ Antiword ุงููุจุฑูุฌ ุนูููุงู ุนูู ุงูุณูุฑูุฑุ **ููู ูุงุฆู** ูุบูุงุจ ุถุจุท ูุชุบูุฑ ุงูุจูุฆุฉ `VITE_FILE_IMPORT_BACKEND_URL`.
- **`types/typing-system.ts` (ูุธุงู ุงููุชุงุจุฉ ุงูุงูุณูุงุจู):**
  - ูููุฑ 3 ุฃูุถุงุน (plain, auto-deferred, auto-live) ูุนุฏู ุชุฌููุฏ ูุงุฌูุฉ ุงูููุณุชุฎุฏู. ุงููุถุน ุงูุญู ูุฑุจูุท ุจูุคูุช ุญููููุ **ููู** ูุงุฌูุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุฌุงูุจูุฉ ูุงุฑุบุฉุ ูุง ูุฌุจุฑ ุงููุณุชุฎุฏู ุนูู ุงูุจูุงุก ูู ูุถุน ุงูู `plain` ุงูุงูุชุฑุงุถู ูุฃูู ูุง ูููู ุฒุฑุงู ูุชุบููุฑู!

### ๐ ุฌ. ูููุงุช "ุชุฌุงูุฒูุงูุง ููุญู ุงูุขู ูุชุทููุฑูู ุนููุง" (Legacy Outdated Code)

- **`toolbar.ts` (ุงูุดุฑูุท ุงูููุงุณููู ุงูููุฌูุฑ):**
  - ุดุฑูุท ุจุฏุงุฆู ุฌุฏุงู ุจู 3 ุฃุฒุฑุงุฑ ุชุนูุฏ ูุฒูู ุงูู Vanilla DOM. **ุชุฌุงูุฒูุงู ุชูุงูุงู** ุจุจูุงุก ุดุฑูุท Dock ุงูุนุงุฆู ุจู App.tsx ุจุฃูุซุฑ ูู 15 ุฃููููุฉ ืืชุฃุซูุฑุงุช ุจุตุฑูุฉ ูุจูุฑุฉุ ููู ูุนุฏ ููุณุชูุฑุฏ ูุฐุง ุงูููุฏ ูู ุฃู ููุงู.
- **`utils/cn.ts`:**
  - ุฅุนุงุฏุฉ ุชุตุฏูุฑ ุบูุฑ ุถุฑูุฑูุฉ (ุณุทุฑ ูุงุญุฏ ููุท) ููุธุงุฆู ุฏูุฌ CSS ุงูุฃุณุงุณูุฉ. ุงูููููุงุช ุงูุฐููุฉ ุฃุตุจุญุช ุชุณุชูุฑุฏู ูุจุงุดุฑุฉ ูู ุฌุฐูุฑูุ ูุง ูููุด ุฏูุฑู ุงูุญุงูู.

### ๐ต ุฏ. "ุญุงุฌุงุช ุบูุฑ ููุฌูุฏุฉ ุจุงููุงุฌูุฉ ุฃุณุงุณุงู" (ูุฌูุงุช ุงูุชูููุฐ ุงูููุชุดูุฉ)

ููุฒุงุช ูุนุฑููุฉ ููุตูุต ุฃู ููุซุจุชุฉุ ูููู ููุณ ููุง ุฃู ุฃุซุฑ ูุฑุฆู ุนููู (GUI):

- **OCR ุนุจุฑ Mistral & DOC Converter:** ูุตุทูุญุงุช ูุนุฑูุฉ ูู `file-import` ูููุฌูุฏุฉ ุนูู ุงูุฎุงุฏูุ ูููู ุงููุชุตูุญ ูุฑูุถ ุงูู DOC ููุง ุชูุฌุฏ ูุงุฌูุฉ ูุงุณุชุฏุนุงุก OCR. ุงูููุชุจุฉ ูุซุจุชู ููู ุบูุฑ ูุณุชูุฑุฏุฉ.
- **ุงูุจูููุตุงุช ุงูุฌุฑูุฆุฉ (`aggressive` ู `limited-rewrite`):** ุณูุงุณุงุช ุฏูุฌ ูุตุญุญุฉ ูุนุฑููุฉ ุจุนูู ูู `structure-pipeline`ุ ููู ุงูููุฏ ุงููุนูุงุฑู ุงููุนูู ูุง ููุจู ุบูุฑ ุจูููุตุฉ ุงูุฏูุฌ ุงููุณุชุฃููุฉ (`none`, `label-only`).
- **ุฅุถุงูุงุช ููุงุนูุฉ ูุฌุฏุงูู (Unused Extensions):** ุญุฒู ูุซู `puppeteer`ุ `@tiptap/extension-bubble-menu`ุ ู `@tiptap/extension-table` ูุซุจุชุฉ ุฎูู ุงูููุงููุณ ููููุง ูุง ุชูุณุชุฏุนู ููุง ุชูุณุชุฎุฏู ุฏุงุฎู Editor Area.

---

## 3. ุชูุตูู ุฌุฏุงูู ุงูุชูุนูู ูุฃุฏูุงุฑ ุงููููุงุช ุงูุญุงููุฉ ูู ุงููุดุฑูุน

ุจุงูุงุจุชุนุงุฏ ุนู ุชุนููุฏุงุช ุงูููุงุฑูุฉุ ููุง ุงูุฏููู ุงููุงูู ูุฏูุฑ ูุญุงูุฉ ุงูุงุณุชุฏุนุงุก ููู ููู ููุฌุฏ ูู ุชุฏูููุงุช `src/`:

### ุฃ) ูููุงุช ุงูููุงุฉ ุงูุชุฌุงุฑูุฉ ูุงูููุจ (Core & UI)

| ุงูููู               | ุงูุญุงูุฉ ูุงููุณุชููููู   | ูุตู ุงูุฏูุฑ ุงูููููู ุงููุนูู                                                                                                         |
| ------------------- | -------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| **`App.tsx`**       | โ ููุนูู (1,068 ุณุทุฑ) | ุงูุฏูุงุบ ุงูุจุดุฑู ูุงููููู ุงูุดุงูู. ูุญูู ุงูุฏูู ุงูุนุงุฆูุ ุงูุดุฑูุท ุงูุฌุงูุจูุ ูุญุณุจ ุงูุฅุญุตุงุฆูุงุช ุงูุญูุฉุ ููุฏูุฑ ุฏูุฑุงุช ุงูุชุนุฏูู ูุงูุญูุธ.              |
| **`editor.ts`**     | โ ููุนูู (205 ุฃุณุทุฑ)  | ุจุงููุฉ ุงููุญุฑุฑ (Factory)ุ ููุณุฌูู ุฅุถุงูุงุช ุงููุชุงุจุฉ ุงูุณูููุงุฆูุฉ ูุฃูุธูุฉ ุชุฑููู ุงูุตูุญุฉ (A4)ุ ูุงูููุตูู ุงูุฐูู ูููุณุฎ/ุงููุตู `PasteClassifier`. |
| **`main.tsx`**      | โ ููุนูู (61 ุณุทุฑ)    | ููุทุฉ ุงูุงูุทูุงู ุงูุดุงููุฉุ ูุญูู ุงูุณูุฉ ุงูุฏุงููุฉ (Dark Theme)ุ ููููุฏ ุนุฑุถ ุงูุฅุดุนุงุฑุงุช.                                                     |
| **`toolbar.ts`**    | โ ููุฏ ููุฌูุฑ ูุชูุงุนุฏ  | ุงูุดุฑูุท ุงูุจุฏุงุฆู ุงูุณุงุจู. ูุง ุฃุญุฏ ูุณุชุฏุนููุ ูููู ุญุฐูู ุจุฃูุงู.                                                                          |
| **`vite-env.d.ts`** | โ ููุนูู (ุฎูู)       | ุชุนุฑููุงุช ููุงุณูุฉ ูููุชุจุฉ Vite ููุญูุงุธ ุนูู ุญูููุฉ ูุฑุงุกุฉ ุงููุณุงุฑุงุช.                                                                      |

### ุจ) ูููุงุช ุงูุฃููุงุน ูุงูููุงุนุฏ (Types Interfaces / 9 ูููุงุช ููุนููุฉ 100%)

ุชูุนุจ ุฏูุฑ ูุญุงูู ุงูุฏูุงุน ูุชุฌูุนูุง ููุจุฉ **`index.ts`** ููุจุฑูุฌุฉ ุงููุฑูุญุฉ `@/types`:

1. **`screenplay.ts`:** ุฏุณุชูุฑ ุฃุณุงุณู ููุฃููุงุน ุงูู 10 ููุณููุงุฑูู ููุฅุญุตุงุฆูุงุช ุงูููู.
2. **`editor-engine.ts`:** ุณูุงุณุฉ ุงูุชูุงูุถ (Adapter Contract) ูุนุฒู ุชุนุฏููุงุช ุงููุงุฌูุฉ ุนู TipTapุ ููู ูุธููุฉ ูุจูุฑุฉ.
3. **`file-import.ts`:** ูุถุจุท 6 ุตูุบ ูุฏุนููุฉุ 7 ุทุฑู ุงุณุชุฎุฑุงุฌ.
4. **`structure-pipeline.ts`:** ุฃููุงุท ุงูุฏูุฌุ ูุชุงุฆุฌ ุงููุตูููุงุช ุงูุชุฎูููุฉ.

### ุฌ) ูููุงุช ุฃุฏูุงุช ุงุณุชูุฑุงุฏ ูุจูุงุก ุงููุณุชูุฏุงุช ุงูุนููุงูุฉ (Utils / 12 ูููุงู ููุนููุฉ)

ูุณุงุฑ ุงููุนุงูุฌุงุช ุงูุฎููุฉ ุงูุนุธููุ ูุชูุฏููุง ูุญุฑู `import/extract`:

1. **ูุธุงู `document-model.ts`:** ุงููุญูุฑ ุงูุฐู ููุฌุฑู ุงูุชุนุจุฆุฉ ูุงูุชูุฑูุบ ูุงูุชุฃููู ุงููุงุณู ูููุตูุต ุนุจุฑ Base64.
2. **ุงูููุณูุงุช (`open-pipeline.ts`ุ `extract/index.ts`):** ุงุฎุชูุงุฑ ุงููุณุงุฑ ุงูููุงุณุจ ูุงุณุชูุนุงุจ ุงููุณุชูุฏุงุช ุงููุณุชูุฑุฏุฉ ูุถูุงู ุฃูุงู ูุนุงูุฌุฉ PDFุ ุงููุต ุงูุฎุงูุตุ ู FDX ุจุฐูุงุก.
3. **ุฃุฏูุงุช ุงููุนุงูุฌุฉ `preprocessor.ts`:** ุงูุบุณู ุงููููุฌู ููููุงุทุน ุงูุนุฑุจูุฉ ุงูุนุชููุฉุ ุฅุฒุงูุฉ ุงูุชุนุฏุงุฏ ูุฅุตูุงุญ ุงูุญูุงุฑุงุช ูุจู ุชุตููููุง ุจุงูู Pipeline.
4. **`logger.ts`:** ุงูููุซูู ููุฃุญุฏุงุซ ุงูุฃูููุฉ.

---

## 4. ุงูุชูุตูุงุช ุงูุฏุงุฎููุฉ ุงูุชูุธูููุฉ ูุฑูุน ุงูููุงุกุฉ

ุญุณุจ ุงูุชุญูููุงุช ุงููุชุฑุงููุฉ ููุฏุณูุงู ูููุฌูุงุช ูุงููุถูุฌ:

1. **ุฃููููุฉ ุจูุฆูุฉ:** ุชุฃููู ููุงุชูุญ ุงููุชุบูุฑุงุช (`.env`) ููุณุฎุฉ ุฏููููุจ ูุฅุฏุฎุงู ููุงุชูุญ `ANTHROPIC_API_KEY` ู `VITE_FILE_IMPORT_BACKEND_URL` ูุชูุดูุท ุงูุฃููุงุฏ ุงูุนููุงูุฉ ุงูู "ุงููุงุฆูุฉ".
2. **ุจุฑูุฌุฉ ูุงุฌูุฉ ุฅุนุฏุงุฏุงุช ููููุฏุฉ:** ุชูุนูู ุฎูุงุฑุงุช ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุงูููุชุฉ ูุชุบููุฑ ุฃูุถุงุน ุงูู (`TypingSystemMode`) ูู ูุฅูู ุงูุชุฑุณูู ุงููุจุงุดุฑ (Auto-live).
3. ุฅุฒุงูุฉ ููู **`toolbar.ts`** ูููุฏ ุงูู **`cn.ts`** ุงูุฒุงุฆุฏ ุจุงููุงูู ูุชูุธูู ุจูุฆุงุช ุงููุดุฑูุนุ ูุงูุชูุงุน ุชุญูููุงุช ุชุตุงููู `toolbar.css` ุงูุดุจุญูุฉ ูู `main.tsx`.
4. ูุฑุงุฌุนุฉ ุตูุงุญูุงุช ุงูุชุซุจูุช ุงููุนุทูุฉ ูุจุนุถ ุงูุญุฒู ุงูููููุฉ ูุซู `puppeteer` ู `bubble-menu` ูุงูุงุณุชูุงุฏุฉ ูููุง ุฃู ุทุฑุฏูุง ูุชูููุต ูุณุงุญุงุช ุงูุจูุงุก (Build Size).
